[7;49;32mtake_test.sh: A wrf_hydro candidate takes a test.                [0m

[0;49;32mBoilerplate:[0m
Date                  : 2018 Feb 02 17:22:18 UTC
User                  : docker
Machine               : fca4781cc975
wrf_hydro_tests commit: 8eb31cff709fdd1e082333c790260b9108ea1d8f
There are uncommitted changes to wrf_hydro_tests.
candidateSpecFile     : /wrf_hydro_tests/examples/nwm_ana/sixmile/docker/local_reg-upstream/candidate_spec_GNU.sh
testSpecFile          : /wrf_hydro_tests/tests/fundamental.sh
Log file              : /wrf_hydro_tests/examples/nwm_ana/sixmile/docker/local_reg-upstream/candidate_spec_GNU_test_spec_fundamental.log
Will echo candidateSpecFile to log at end.

[7;49;32m=================================================================[0m
[7;49;32mSetting up the candidate                                         [0m

[7;49;32m=================================================================[0m
[7;49;32mTesting the candidate                                            [0m

[0;49;32m-----------------------------------[0m
[7;49;32mCandidate fork: LOCAL: /wrf_hydro_nwm [0m
[0;49;32mCandidate branch:[0m    master
[0;49;32mTesting commit:[0m
commit b289744a4390660cf1836d48b42e5eea90584191
Merge: 89f2e1a 54a510d
Author: James McCreight <jamesmcc@ucar.edu>
Date:   Wed Jan 10 22:56:27 2018 -0700

    Merge branch 'master' of github.com-jmccreight:jmccreight/wrf_hydro_nwm into HEAD

[0;49;32m-----------------------------------[0m
[7;49;32mcompile.sh:[0m
[0;49;32mQuestion: Does candidate binary compile?[0m
Compiling with GNU
*************************************************************************
Note: Because of docker compile issues with mounted volumes, code from
$candidateLocalPath=/wrf_hydro_nwm
is being copied to 
$candidateRepoDir=/home/docker/test_repos/candidate
for compilation. Make logs and .f files reside only inside the container.
*************************************************************************
Compiling in /home/docker/test_repos/candidate/trunk/NDHMS/

*****************************************************************
The envrionment variables use in the compile (alphabetically):
HYDRO_D=0
HYDRO_REALTIME=1
NCEP_WCOSS=0
NETCDF=/usr/local
SPATIAL_SOIL=1
WRF_HYDRO=1
WRF_HYDRO_NUDGING=1
WRF_HYDRO_RAPID=0
WRFIO_NCD_LARGE_FILE_SUPPORT=1
*****************************************************************

f951: Warning: Nonexistent include directory â€˜../../MPPâ€™ [-Wmissing-include-dirs]
ar: creating ../lib/libHYDRO.a
f951: Warning: Nonexistent include directory â€˜../../MPPâ€™ [-Wmissing-include-dirs]
f951: Warning: Nonexistent include directory â€˜../../MPPâ€™ [-Wmissing-include-dirs]
f951: Warning: Nonexistent include directory â€˜../../MPPâ€™ [-Wmissing-include-dirs]
f951: Warning: Nonexistent include directory â€˜../../MPPâ€™ [-Wmissing-include-dirs]
f951: Warning: Nonexistent include directory â€˜../../MPPâ€™ [-Wmissing-include-dirs]
f951: Warning: Nonexistent include directory â€˜../../MPPâ€™ [-Wmissing-include-dirs]
f951: Warning: Nonexistent include directory â€˜../../MPPâ€™ [-Wmissing-include-dirs]
f951: Warning: Nonexistent include directory â€˜../../MPPâ€™ [-Wmissing-include-dirs]
f951: Warning: Nonexistent include directory â€˜../../MPPâ€™ [-Wmissing-include-dirs]
f951: Warning: Nonexistent include directory â€˜../../MPPâ€™ [-Wmissing-include-dirs]
f951: Warning: Nonexistent include directory â€˜../../MPPâ€™ [-Wmissing-include-dirs]
f951: Warning: Nonexistent include directory â€˜../../MPPâ€™ [-Wmissing-include-dirs]
f951: Warning: Nonexistent include directory â€˜../../MPPâ€™ [-Wmissing-include-dirs]
f951: Warning: Nonexistent include directory â€˜../../MPPâ€™ [-Wmissing-include-dirs]
f951: Warning: Nonexistent include directory â€˜../../MPPâ€™ [-Wmissing-include-dirs]
f951: Warning: Nonexistent include directory â€˜../../MPPâ€™ [-Wmissing-include-dirs]
f951: Warning: Nonexistent include directory â€˜../../MPPâ€™ [-Wmissing-include-dirs]
f951: Warning: Nonexistent include directory â€˜../../MPPâ€™ [-Wmissing-include-dirs]
f951: Warning: Nonexistent include directory â€˜../../MPPâ€™ [-Wmissing-include-dirs]
f951: Warning: Nonexistent include directory â€˜../../MPPâ€™ [-Wmissing-include-dirs]
f951: Warning: Nonexistent include directory â€˜../../MPPâ€™ [-Wmissing-include-dirs]
f951: Warning: Nonexistent include directory â€˜../../MPPâ€™ [-Wmissing-include-dirs]
f951: Warning: Nonexistent include directory â€˜../modâ€™ [-Wmissing-include-dirs]

*****************************************************************
Make was successful
*****************************************************************
The envrionment variables use in the compile (alphabetically) AGAIN:
HYDRO_D=0
HYDRO_REALTIME=1
NCEP_WCOSS=0
NETCDF=/usr/local
SPATIAL_SOIL=1
WRF_HYDRO=1
WRF_HYDRO_NUDGING=1
WRF_HYDRO_RAPID=0
WRFIO_NCD_LARGE_FILE_SUPPORT=1
*****************************************************************

[5;49;32mAnswer: Candidate binary compile successful under GNU![0m

[0;49;32m-----------------------------------[0m
[7;49;32mrun.sh:[0m
[0;49;32mQuestion: Does the candidate binary run? (using 2 cores).[0m
Running in /test_domain/run.candidate
mpirun -np 2 ./wrf_hydro.exe 1> 2018-02-02_17-22-32.stdout 2> 2018-02-02_17-22-32.stderr
[5;49;32mAnswer: Candidate binary run successful![0m

[0;49;32m-----------------------------------[0m
[7;49;32mperfect_restart.sh:[0m
[0;49;32mRunning candidate binary from restart (with 2 cores).[0m
Running in /test_domain/run.candidate.restart
mpirun -np 2 ./wrf_hydro.exe 1> 2018-02-02_17-22-33.stdout 2> 2018-02-02_17-22-33.stderr
[0;49;32mCandidate binary restart run successful.[0m

[0;49;32mQuestion: Perfect restarts?[0m.
Comparing RESTART files
Comparing candidate file /test_domain/run.candidate.restart/RESTART.2013060200_DOMAIN1 against reference file /test_domain/run.candidate/RESTART.2013060200_DOMAIN1
Comparing HYDRO_RST files
Comparing candidate file /test_domain/run.candidate.restart/HYDRO_RST.2013-06-02_00:00_DOMAIN1 against reference file /test_domain/run.candidate/HYDRO_RST.2013-06-02_00:00_DOMAIN1
Comparing nudgingLastObs files
Comparing candidate file /test_domain/run.candidate.restart/nudgingLastObs.2013-06-02_00:00:00.nc against reference file /test_domain/run.candidate/nudgingLastObs.2013-06-02_00:00:00.nc
All restart file comparisons pass
[5;49;32mAnswer: Perfect restart comparison successful![0m

[0;49;32m-----------------------------------[0m
[7;49;32mnumber_of_cores.sh:[0m
[0;49;32mRunning candidate binary with 1 cores.[0m
Running in /test_domain/run.candidate.ncores_test
mpirun -np 1 ./wrf_hydro.exe 1> 2018-02-02_17-22-34.stdout 2> 2018-02-02_17-22-34.stderr
[0;49;32mCandidate binary run successful with 1 cores.[0m

[0;49;32mQuestion: Are restarts unchanged with the number of cores used?[0m
Comparing RESTART files
Comparing candidate file /test_domain/run.candidate/RESTART.2013060200_DOMAIN1 against reference file /test_domain/run.candidate.ncores_test/RESTART.2013060200_DOMAIN1
Comparing candidate file /test_domain/run.candidate/RESTART.2013060112_DOMAIN1 against reference file /test_domain/run.candidate.ncores_test/RESTART.2013060112_DOMAIN1
Comparing HYDRO_RST files
Comparing candidate file /test_domain/run.candidate/HYDRO_RST.2013-06-02_00:00_DOMAIN1 against reference file /test_domain/run.candidate.ncores_test/HYDRO_RST.2013-06-02_00:00_DOMAIN1
Comparing candidate file /test_domain/run.candidate/HYDRO_RST.2013-06-01_12:00_DOMAIN1 against reference file /test_domain/run.candidate.ncores_test/HYDRO_RST.2013-06-01_12:00_DOMAIN1
Comparing nudgingLastObs files
Comparing candidate file /test_domain/run.candidate/nudgingLastObs.2013-06-01_12:00:00.nc against reference file /test_domain/run.candidate.ncores_test/nudgingLastObs.2013-06-01_12:00:00.nc
Comparing candidate file /test_domain/run.candidate/nudgingLastObs.2013-06-02_00:00:00.nc against reference file /test_domain/run.candidate.ncores_test/nudgingLastObs.2013-06-02_00:00:00.nc
All restart file comparisons pass
[5;49;32mAnswer: Number of cores test restart comparison successful![0m

[0;49;32m-----------------------------------[0m
[7;49;32mReference fork: LOCAL: /wrf_hydro_nwm [0m
[0;49;32mReference branch:[0m    master
[0;49;32mTesting commit:[0m
commit b289744a4390660cf1836d48b42e5eea90584191
Merge: 89f2e1a 54a510d
Author: James McCreight <jamesmcc@ucar.edu>
Date:   Wed Jan 10 22:56:27 2018 -0700

    Merge branch 'master' of github.com-jmccreight:jmccreight/wrf_hydro_nwm into HEAD

[0;49;32m-----------------------------------[0m
[7;49;32mregression.sh:[0m
[0;49;32mCompiling reference binary.[0m
*************************************************************************
Note: Because of docker compile issues with mounted volumes, code from
$referenceLocalPath=/wrf_hydro_nwm
is being copied to 
$refRepoDir=/home/docker/test_repos/reference
for compilation. Make logs and .f files reside only inside the container.
*************************************************************************
Compiling in /home/docker/test_repos/reference/trunk/NDHMS/

*****************************************************************
The envrionment variables use in the compile (alphabetically):
HYDRO_D=0
HYDRO_REALTIME=1
NCEP_WCOSS=0
NETCDF=/usr/local
SPATIAL_SOIL=1
WRF_HYDRO=1
WRF_HYDRO_NUDGING=1
WRF_HYDRO_RAPID=0
WRFIO_NCD_LARGE_FILE_SUPPORT=1
*****************************************************************

f951: Warning: Nonexistent include directory â€˜../../MPPâ€™ [-Wmissing-include-dirs]
ar: creating ../lib/libHYDRO.a
f951: Warning: Nonexistent include directory â€˜../../MPPâ€™ [-Wmissing-include-dirs]
f951: Warning: Nonexistent include directory â€˜../../MPPâ€™ [-Wmissing-include-dirs]
f951: Warning: Nonexistent include directory â€˜../../MPPâ€™ [-Wmissing-include-dirs]
f951: Warning: Nonexistent include directory â€˜../../MPPâ€™ [-Wmissing-include-dirs]
f951: Warning: Nonexistent include directory â€˜../../MPPâ€™ [-Wmissing-include-dirs]
f951: Warning: Nonexistent include directory â€˜../../MPPâ€™ [-Wmissing-include-dirs]
f951: Warning: Nonexistent include directory â€˜../../MPPâ€™ [-Wmissing-include-dirs]
f951: Warning: Nonexistent include directory â€˜../../MPPâ€™ [-Wmissing-include-dirs]
f951: Warning: Nonexistent include directory â€˜../../MPPâ€™ [-Wmissing-include-dirs]
f951: Warning: Nonexistent include directory â€˜../../MPPâ€™ [-Wmissing-include-dirs]
f951: Warning: Nonexistent include directory â€˜../../MPPâ€™ [-Wmissing-include-dirs]
f951: Warning: Nonexistent include directory â€˜../../MPPâ€™ [-Wmissing-include-dirs]
f951: Warning: Nonexistent include directory â€˜../../MPPâ€™ [-Wmissing-include-dirs]
f951: Warning: Nonexistent include directory â€˜../../MPPâ€™ [-Wmissing-include-dirs]
f951: Warning: Nonexistent include directory â€˜../../MPPâ€™ [-Wmissing-include-dirs]
f951: Warning: Nonexistent include directory â€˜../../MPPâ€™ [-Wmissing-include-dirs]
f951: Warning: Nonexistent include directory â€˜../../MPPâ€™ [-Wmissing-include-dirs]
f951: Warning: Nonexistent include directory â€˜../../MPPâ€™ [-Wmissing-include-dirs]
f951: Warning: Nonexistent include directory â€˜../../MPPâ€™ [-Wmissing-include-dirs]
f951: Warning: Nonexistent include directory â€˜../../MPPâ€™ [-Wmissing-include-dirs]
f951: Warning: Nonexistent include directory â€˜../../MPPâ€™ [-Wmissing-include-dirs]
f951: Warning: Nonexistent include directory â€˜../../MPPâ€™ [-Wmissing-include-dirs]
f951: Warning: Nonexistent include directory â€˜../modâ€™ [-Wmissing-include-dirs]

*****************************************************************
Make was successful
*****************************************************************
The envrionment variables use in the compile (alphabetically) AGAIN:
HYDRO_D=0
HYDRO_REALTIME=1
NCEP_WCOSS=0
NETCDF=/usr/local
SPATIAL_SOIL=1
WRF_HYDRO=1
WRF_HYDRO_NUDGING=1
WRF_HYDRO_RAPID=0
WRFIO_NCD_LARGE_FILE_SUPPORT=1
*****************************************************************

[0;49;32mReference binary: compilation under GNU successful.[0m

[0;49;32mRunning reference binary (with 2 cores).[0m
mpirun -np 2 ./wrf_hydro.exe 1> 2018-02-02_17-22-47.stdout 2> 2018-02-02_17-22-47.stderr
[0;49;32mReference binary: run successful.[0m

[0;49;32mQuestion: Do candidate results regress on to reference results?[0m
Comparing RESTART files
Comparing candidate file /test_domain/run.candidate/RESTART.2013060200_DOMAIN1 against reference file /test_domain/run.reference/RESTART.2013060200_DOMAIN1
Comparing candidate file /test_domain/run.candidate/RESTART.2013060112_DOMAIN1 against reference file /test_domain/run.reference/RESTART.2013060112_DOMAIN1
Comparing HYDRO_RST files
Comparing candidate file /test_domain/run.candidate/HYDRO_RST.2013-06-02_00:00_DOMAIN1 against reference file /test_domain/run.reference/HYDRO_RST.2013-06-02_00:00_DOMAIN1
Comparing candidate file /test_domain/run.candidate/HYDRO_RST.2013-06-01_12:00_DOMAIN1 against reference file /test_domain/run.reference/HYDRO_RST.2013-06-01_12:00_DOMAIN1
Comparing nudgingLastObs files
Comparing candidate file /test_domain/run.candidate/nudgingLastObs.2013-06-01_12:00:00.nc against reference file /test_domain/run.reference/nudgingLastObs.2013-06-01_12:00:00.nc
Comparing candidate file /test_domain/run.candidate/nudgingLastObs.2013-06-02_00:00:00.nc against reference file /test_domain/run.reference/nudgingLastObs.2013-06-02_00:00:00.nc
All restart file comparisons pass
[5;49;32mAnswer: Regression test restart comparison successful![0m

[7;49;32m=================================================================[0m
[7;49;32mResults of all tests.                                            [0m
[5;49;32mAll test appear successful.[0m

[7;49;32m=================================================================[0m
[7;49;32mTaking down the candidate.                                       [0m

[7;49;32m=================================================================[0m
[7;49;32mLogging the candidateSpecFile.                                   [0m
---------------------------------------------------------------------------
Machine spec group: 

WRF_HYDRO_TESTS_DIR = /wrf_hydro_tests

GITHUB_USERNAME = jmccreight
GITHUB_AUTHTOKEN = ********************

WRF_HYDRO_MODULES =

NETCDF = /usr/local

* Run group *

WRF_HYDRO_RUN:


---------------------------------------------------------------------------
Candidate spec file group: 

* Domain Group *

domainSourceDir = /test_domain

domainRunDir = /test_domain

* Compiler *

WRF_HYDRO_COMPILER = GNU

* Run Group*

TEST_WALL_TIME = 00:05

nCoresDefault = 2

nCoresTest = 1

* Model compile options *

WRF_HYDRO = 1
HYDRO_D = 0
SPATIAL_SOIL = 1
WRFIO_NCD_LARGE_FILE_SUPPORT = 1
WRF_HYDRO_RAPID = 0
HYDRO_REALTIME = 1
NCEP_WCOSS = 0
WRF_HYDRO_NUDGING = 1

* Repo Groups *

REPO_DIR = /home/docker/test_repos

** Candidate repo subgroup **

candidateFork = NCAR/wrf_hydro_nwm
candidateBranchCommit = master
candidateLocalPath = /wrf_hydro_nwm

** Reference repo subgroup **

referenceFork = jmccreight/wrf_hydro_nwm
referenceBranchCommit = 95ff36990801de0a3a819001d1fa9573bca3cfec
referenceLocalPath = /wrf_hydro_nwm


[7;49;32m=================================================================[0m
[7;49;32mCandidate testing complete.                                      [0m
